<!doctype <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Animal Buttons</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="stylesheet" type="text/css" media="screen" href="main.css" /> -->
    <!-- <script src="main.js"></script> -->
</head>

<body>

    <div id="button9"></div>
    <div>
        <hr>
    </div>
    <div id="addButton">
        <form action="">
            Add an animal:
            <input type="text" name="addAnimal" id="add_animal" value="">
            <input type="submit" value="Submit">
        </form>
    </div>
    <div>
        <hr>
    </div>
    <div id="images9"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

        var animalList = ["dog", "cat", "horse", "cow"];

        function displayButton() {

            $("#button9").empty();

            for (var i = 0; i < animalList.length; i++) {
                $("#button9").append('<button id="anName" kineAnimal="' + animalList[i] + '">' + animalList[i] + '</button> | ');
                // $("#button9").attr("kineAnimal", animalList[i]);
            }

        }

        function displayNewbutton() {
            
            $("#button9").empty();

            for (var i = 0; i < animalList.length; i++) {
                $("#button9").append('<button id="anName" kineAnimal="' + animalList[i] + '">' + animalList[i] + '</button> | ');
            }

            $("button").on("click", function () {
                // $(this).slideUp();
                // $(document).ready(function () {
                // Example queryURL for Giphy API
                // console.log("this.data: " + $(this).val("kineAnimal"));
                console.log("this.data: " + $(this).attr("kineAnimal"));
                var oreo = $(this).attr("kineAnimal");
                var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + oreo + "&api_key=xYRPv5NFcEDOdBTq45Pvhvr7bp7IuIud";

                $.ajax({
                    url: queryURL,
                    method: "GET"
                }).then(function (response) {
                    var dataReturn = response.data;
                    console.log(response);
                    console.log("response.length: " + dataReturn.length);


                    for (var i = 0; i < dataReturn.length; i++) {
                        $("#images9").prepend(
                            '<div>Rating: ' + dataReturn[i].rating + '</div>'
                            +
                            '<img src="' + dataReturn[i].images.original_still.url + '"><br><br>'
                        );
                    }

                });
            });
        }

        displayButton();

        $("button").on("click", function () {
            // $(this).slideUp();
            // $(document).ready(function () {
            // Example queryURL for Giphy API
            // console.log("this.data: " + $(this).val("kineAnimal"));
            console.log("this.data: " + $(this).attr("kineAnimal"));
            var oreo = $(this).attr("kineAnimal");
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + oreo + "&api_key=xYRPv5NFcEDOdBTq45Pvhvr7bp7IuIud";

            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                var dataReturn = response.data;
                console.log(response);
                console.log("response.length: " + dataReturn.length);


                for (var i = 0; i < dataReturn.length; i++) {
                    $("#images9").prepend(
                        '<div>Rating: ' + dataReturn[i].rating + '</div>'
                        +
                        '<img src="' + dataReturn[i].images.original_still.url + '"><br><br>'
                    );
                }

            });
        });

        $("form").submit(function (event) {
            event.preventDefault();
            var gaga = $("#add_animal").val();
            animalList.push(gaga);
            console.log(animalList);
            console.log("whats this: " + gaga);
            // $("#images9").empty();
            displayNewbutton();
            // alert("Submit prevented");
        });

        // });

        // $(document).ready(function () {
        //     // Example queryURL for Giphy API
        //     var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + animalList[0] + "&api_key=xYRPv5NFcEDOdBTq45Pvhvr7bp7IuIud";

        //     $.ajax({
        //         url: queryURL,
        //         method: "GET"
        //     }).then(function (response) {
        //         var dataReturn = response.data;
        //         console.log(response);
        //         console.log("response.length: " + dataReturn.length);


        //         for (var i = 0; i < dataReturn.length; i++) {
        //             $("#images9").prepend('<img src="' + dataReturn[i].images.original_still.url + '">');
        //         }

        //         // $("#images9").prepend('<img src="' + response.data[0].images.original.url + '">');
        //         // $("#images9").prepend('<img src="' + response.data[1].images.original.url + '">');
        //         // $("#images9").prepend('<img src="' + response.data[2].images.original.url + '">');
        //         // $("#images9").prepend('<img src="' + response.data[3].images.original.url + '">');
        //         // $("div").html(response);
        //     });
        // });
    </script>

</body>

</html>